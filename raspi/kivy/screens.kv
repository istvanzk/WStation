#:import SlideTransition kivy.uix.screenmanager.SlideTransition
#:import cos math.cos
#:import sin math.sin
#:import radians math.radians
MyScreenManager:
    transition: SlideTransition()
    FirstScreen:
    SecondScreen:

<LabelN@Label>:
    font_size: '40sp'
    color: 1,1,1,1
    outline_color: 0,0,0
    outline_width: 5
    text_size: self.size
    halign: 'center'
    valign: 'middle'
    bold: True

<LabelNE@Label>:
    font_size: '30sp'
    text_size: self.size
    color: 0.6,0.6,0.6,1
    outline_color: 0,0,0
    outline_width: 10
    halign: 'center'
    valign: 'middle'
    bold: True

<LabelInfo@Label>:
    font_size: '30sp'
    text_size: self.size
    outline_color: 0,0,1
    outline_width: 10
    halign: 'center'
    valign: 'middle'
    bold: True

<FirstScreen>:
    name: 'first'
    FloatLayout:
        Widget:
            size_hint: 1.0, 1.0
            pos_hint: {'x':0.0, 'y':0.0}
            canvas.before:      
                Color:
                    rgba: 0.5,0,0,0 
                Rectangle:
                    size: self.size
                    pos: self.pos

            canvas:
                Color:
                    rgb: 0,0,1
                Line:
                    width: 1.5
                    circle:
                        (self.center_x, self.center_y, 200, 10, 80)
                Line:
                    width: 1.5
                    circle:
                        (self.center_x, self.center_y, 200, 100, 170)
                Line:
                    width: 1.5
                    circle:
                        (self.center_x, self.center_y, 200, 190, 260)
                Line:
                    width: 1.5
                    circle:
                        (self.center_x, self.center_y, 200, 280, 350)

                Color:
                    hsv: root.wind_speed_hue,1,1
                Ellipse:
                    pos: self.center_x-2.5*root.wind_speed, self.center_y-2.5*root.wind_speed
                    size: 5*root.wind_speed, 5*root.wind_speed
                    angle_start: root.wind_direction-11.25
                    angle_end: root.wind_direction+11.25
                    segments: 2    
                Ellipse:
                    pos: self.center_x-10, self.center_y-10
                    size: 20,20
                    angle_start: 0
                    angle_end: 360

                Color: 
                    rgb: 1,1,1
                Line:
                    width: 2.
                    cap: 'round'
                    joint: 'round'
                    points: self.center_x, self.center_y, self.center_x+170*cos(radians(-root.wind_direction+90-11.25)), self.center_y+170*sin(radians(-root.wind_direction+90-11.25))
                Line:
                    width: 2.
                    cap: 'round'
                    joint: 'round'
                    points: self.center_x, self.center_y, self.center_x+170*cos(radians(-root.wind_direction+90+11.25)), self.center_y+170*sin(radians(-root.wind_direction+90+11.25))
 
        LabelN:
            text: 'N'
            pos: 0,200
        LabelN:
            text: 'E'
            pos: 200,00
        LabelN:
            text: 'S'
            pos: 0,-200
        LabelN:
            text: 'W'
            pos: -200,0

        LabelNE:
            text: 'NE'
            pos: 140,140
        LabelNE:
            text: 'SE'
            pos: 140,-140
        LabelNE:
            text: 'SW'
            pos: -140,-140
        LabelNE:
            text: 'NW'
            pos: -140,140

        LabelInfo:
            markup: True
            text: '{:4.1f} '.format(root.air_temperature) + '[sup]o[/sup]C'
            pos: -300,200           
            color: air_temperature_color + [1]

        LabelInfo:
            markup: True
            text: '{:6.1f}'.format(root.air_pressure) + '[size=20]mbar[/size]'
            pos: -300,-200           
            color: 0.6,0.6,0.6,1

        LabelInfo:
            markup: True
            text: '{:4.1f}'.format(root.wind_speed) + '[size=20]m/s[/size]'
            pos: 300,200           
            color: 0.6,0.6,0.6,1

        LabelInfo:
            markup: True
            text: '{:4.1f}'.format(root.air_relhumidity) + '[size=20]%[/size]'
            pos: 300,-200           
            color: 0.6,0.6,0.6,1

        Button:
            pos_hint: {'x':0.975, 'y':0.35}
            size_hint: 0.025, 0.30
            background_color: 0,0,1,0.5
            on_press: app.root.current = 'second'
        
        
<SecondScreen>:
    name: 'second'
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: 'TRACES screen!'
            font_size: 30
    FloatLayout:
        Button:
            pos_hint: {'x':0, 'y':0.35}
            size_hint: 0.025, 0.30
            background_color: 0,0,1,0.5
            on_press: app.root.current = 'first'
